<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Models/ClientUser.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Attachment.html">Attachment</a></li><li><a href="Box.html">Box</a><ul class='methods'><li data-type='method'><a href="Box.html#array">array</a></li><li data-type='method'><a href="Box.html#ArrayOfKeys">ArrayOfKeys</a></li><li data-type='method'><a href="Box.html#delete">delete</a></li><li data-type='method'><a href="Box.html#find">find</a></li><li data-type='method'><a href="Box.html#first">first</a></li><li data-type='method'><a href="Box.html#set">set</a></li></ul></li><li><a href="CategoryChannel.html">CategoryChannel</a></li><li><a href="Client.html">Client</a></li><li><a href="ClientUser.html">ClientUser</a><ul class='methods'><li data-type='method'><a href="ClientUser.html#setGame">setGame</a></li><li data-type='method'><a href="ClientUser.html#setStatus">setStatus</a></li></ul></li><li><a href="DMChannel.html">DMChannel</a><ul class='methods'><li data-type='method'><a href="DMChannel.html#send">send</a></li></ul></li><li><a href="EmbedMessage.html">EmbedMessage</a><ul class='methods'><li data-type='method'><a href="EmbedMessage.html#color">color</a></li><li data-type='method'><a href="EmbedMessage.html#newAuthor">newAuthor</a></li><li data-type='method'><a href="EmbedMessage.html#newDescription">newDescription</a></li><li data-type='method'><a href="EmbedMessage.html#newField">newField</a></li><li data-type='method'><a href="EmbedMessage.html#newFooter">newFooter</a></li><li data-type='method'><a href="EmbedMessage.html#newImage">newImage</a></li><li data-type='method'><a href="EmbedMessage.html#newProvider">newProvider</a></li><li data-type='method'><a href="EmbedMessage.html#newThumbnail">newThumbnail</a></li><li data-type='method'><a href="EmbedMessage.html#newTitle">newTitle</a></li><li data-type='method'><a href="EmbedMessage.html#newVideo">newVideo</a></li></ul></li><li><a href="Emoji.html">Emoji</a></li><li><a href="Game.html">Game</a></li><li><a href="GroupDM.html">GroupDM</a><ul class='methods'><li data-type='method'><a href="GroupDM.html#send">send</a></li></ul></li><li><a href="Guild.html">Guild</a><ul class='methods'><li data-type='method'><a href="Guild.html#banMember">banMember</a></li><li data-type='method'><a href="Guild.html#changeName">changeName</a></li><li data-type='method'><a href="Guild.html#createChannel">createChannel</a></li><li data-type='method'><a href="Guild.html#delete">delete</a></li><li data-type='method'><a href="Guild.html#deleteChannel">deleteChannel</a></li><li data-type='method'><a href="Guild.html#getMember">getMember</a></li><li data-type='method'><a href="Guild.html#unbanMember">unbanMember</a></li></ul></li><li><a href="GuildMember.html">GuildMember</a><ul class='methods'><li data-type='method'><a href="GuildMember.html#ban">ban</a></li><li data-type='method'><a href="GuildMember.html#toString">toString</a></li></ul></li><li><a href="GuildTextChannel.html">GuildTextChannel</a><ul class='methods'><li data-type='method'><a href="GuildTextChannel.html#send">send</a></li></ul></li><li><a href="Invite.html">Invite</a></li><li><a href="Message.html">Message</a></li><li><a href="Presence.html">Presence</a></li><li><a href="Role.html">Role</a><ul class='methods'><li data-type='method'><a href="Role.html#changeName">changeName</a></li><li data-type='method'><a href="Role.html#changePosition">changePosition</a></li><li data-type='method'><a href="Role.html#delete">delete</a></li><li data-type='method'><a href="Role.html#modify">modify</a></li></ul></li><li><a href="Structure.html">Structure</a></li><li><a href="TextBasedChannel.html">TextBasedChannel</a><ul class='methods'><li data-type='method'><a href="TextBasedChannel.html#send">send</a></li></ul></li><li><a href="User.html">User</a><ul class='methods'><li data-type='method'><a href="User.html#toString">toString</a></li></ul></li><li><a href="VoiceChannel.html">VoiceChannel</a></li></ul><h3>Events</h3><ul><li><a href="Client.html#event:Channel_Create">Channel_Create</a></li><li><a href="Client.html#event:Channel_Delete">Channel_Delete</a></li><li><a href="Client.html#event:Channel_Update">Channel_Update</a></li><li><a href="Client.html#event:Guild_Create">Guild_Create</a></li><li><a href="Client.html#event:Guild_newMember">Guild_newMember</a></li><li><a href="Client.html#event:Guild_Role_Create">Guild_Role_Create</a></li><li><a href="Client.html#event:Guild_Role_Delete">Guild_Role_Delete</a></li><li><a href="Client.html#event:Guild_Role_Update">Guild_Role_Update</a></li><li><a href="Client.html#event:Guild_Update">Guild_Update</a></li><li><a href="Client.html#event:Message_Create">Message_Create</a></li><li><a href="Client.html#event:Message_Update">Message_Update</a></li><li><a href="Client.html#event:ready">ready</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Models/ClientUser.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Box = require('./Box.js');
const Presence = require('./Presence.js');
const Structure = require('./Structure.js');

/**
* A ClientUser Structure meant to control over Client's User properties and methods
* @extends Structure
* @param {Object} client ArtzyCord's Client instance
* @param {Object} data A valid User object
* @property {String} username User's username
* @property {String} id User's ID
* @property {String} avatar User's avatar code
* @property {String} discriminator User's discriminator
* @property {Boolean} verified Whether the user is verified or not
* @property {Boolean} bot Whether the user is a bot or not
* @property {Box} DMs Box which contains DM instances
* @property {Object} presence default presence option
* @property {Object} clientPresence
* @property {Boolean} [clientPresence.afk = false] Whether the client is AFK or not
* @property {Number} [clientPresence.since] Since when the user started playing
* @property {String} [clientPresence.status] User's status (online, offline ...)
* @property {Object} [clientPresence.game] User's game object
*
*/
class ClientUser extends Structure {
	constructor(client, data) {
		super(client);
		this.username = data.user.username;
		this.id = data.user.id;
		this.avatar = data.user.avatar;
		this.discriminator = '#' + data.user.discriminator;
		this.verified = data.user.verified;
		this.bot = data.user.bot;
		this.relationShips = data.relationships
		this.DMs = new Box(data.private_channels);
		this.presence = client.getOption('presence', {});
		this.clientPresence = {
			afk: this.presence.afk ? this.presence.afk : false,
			since: this.presence.since ? this.presence.since : null,
			status: this.presence.status ? this.presence.status : 'online',
			game: this.presence.game ? this.presence.game : null
		};
	}

	/**
	* Get user's tag
	* @readonly
	* @property {String} tag Returns user's tag (username + discriminator)
	* @example
	* console.log(client.user.tag) // -> user#xxxx
	*/
	get tag() {
		return this.username + this.discriminator;
	}

	/**
	* Set the game for the client
	* @param {Object} options the options keys
	* @param {String} [options.name] The Game's name
	* @param {String} [options.url = null] Whether you want your bot to "stream" or not
	* @example
	* // setting the client to stream
	* client.user.setGame({name: 'Look at my stream please', url: 'https://twitch.tv/theonlyartz'});
	*/
	setGame(options) {
		if (!options) {
			throw new Error('You must specify the game object');
		}
		const game = {
			game: {
				name: options.name
			}
		};

		if (options.url) {
			game.game.url = options.url;
			game.game.type = 1;
		}

		this._setPresence(game);
	}

	/**
	* Set the game for the client
	* @param {String} status The status for the client
	* @example
	* // setting the client on do not disturb
	* client.user.setStatus('dnd');
	*
	* // setting the client on online
	* client.user.setStatus('online');
	*/
	setStatus(status) {
		if (!status) {
			throw new Error('You must specify the status.');
		}
		if (!status instanceof String) {
			throw new TypeError('Status can\'t be something else than a string.');
		}

		const presence = {
			status: status
		};

		this._setPresence(presence);
	}

	_setPresence(presenceUpdate) {
		const packet = {
			op: 3,
			d: {
				game: presenceUpdate.game ? presenceUpdate.game : this.clientPresence.game,
				status: presenceUpdate.status ? presenceUpdate.status : this.clientPresence.status,
				afk: presenceUpdate.afk ? presenceUpdate.afk : this.clientPresence.afk,
				since: presenceUpdate.since ? presenceUpdate.since : this.clientPresence.since
			}
		};
		this.clientPresence = packet.d;
		this.client.ws.ws.send(JSON.stringify(packet));
	}

}

module.exports = ClientUser;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Nov 25 2017 12:30:45 GMT+0200 (Jerusalem Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
