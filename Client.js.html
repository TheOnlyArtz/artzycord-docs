<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Client.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Attachment.html">Attachment</a></li><li><a href="Box.html">Box</a><ul class='methods'><li data-type='method'><a href="Box.html#array">array</a></li><li data-type='method'><a href="Box.html#ArrayOfKeys">ArrayOfKeys</a></li><li data-type='method'><a href="Box.html#delete">delete</a></li><li data-type='method'><a href="Box.html#find">find</a></li><li data-type='method'><a href="Box.html#first">first</a></li><li data-type='method'><a href="Box.html#set">set</a></li></ul></li><li><a href="CategoryChannel.html">CategoryChannel</a></li><li><a href="Client.html">Client</a></li><li><a href="ClientUser.html">ClientUser</a><ul class='methods'><li data-type='method'><a href="ClientUser.html#setGame">setGame</a></li><li data-type='method'><a href="ClientUser.html#setStatus">setStatus</a></li></ul></li><li><a href="DMChannel.html">DMChannel</a><ul class='methods'><li data-type='method'><a href="DMChannel.html#send">send</a></li></ul></li><li><a href="EmbedMessage.html">EmbedMessage</a><ul class='methods'><li data-type='method'><a href="EmbedMessage.html#color">color</a></li><li data-type='method'><a href="EmbedMessage.html#newAuthor">newAuthor</a></li><li data-type='method'><a href="EmbedMessage.html#newDescription">newDescription</a></li><li data-type='method'><a href="EmbedMessage.html#newField">newField</a></li><li data-type='method'><a href="EmbedMessage.html#newFooter">newFooter</a></li><li data-type='method'><a href="EmbedMessage.html#newImage">newImage</a></li><li data-type='method'><a href="EmbedMessage.html#newProvider">newProvider</a></li><li data-type='method'><a href="EmbedMessage.html#newThumbnail">newThumbnail</a></li><li data-type='method'><a href="EmbedMessage.html#newTitle">newTitle</a></li><li data-type='method'><a href="EmbedMessage.html#newVideo">newVideo</a></li></ul></li><li><a href="Emoji.html">Emoji</a></li><li><a href="Game.html">Game</a></li><li><a href="GroupDM.html">GroupDM</a><ul class='methods'><li data-type='method'><a href="GroupDM.html#send">send</a></li></ul></li><li><a href="Guild.html">Guild</a><ul class='methods'><li data-type='method'><a href="Guild.html#banMember">banMember</a></li><li data-type='method'><a href="Guild.html#changeName">changeName</a></li><li data-type='method'><a href="Guild.html#createChannel">createChannel</a></li><li data-type='method'><a href="Guild.html#delete">delete</a></li><li data-type='method'><a href="Guild.html#deleteChannel">deleteChannel</a></li><li data-type='method'><a href="Guild.html#getMember">getMember</a></li><li data-type='method'><a href="Guild.html#unbanMember">unbanMember</a></li></ul></li><li><a href="GuildMember.html">GuildMember</a><ul class='methods'><li data-type='method'><a href="GuildMember.html#ban">ban</a></li><li data-type='method'><a href="GuildMember.html#toString">toString</a></li></ul></li><li><a href="GuildTextChannel.html">GuildTextChannel</a><ul class='methods'><li data-type='method'><a href="GuildTextChannel.html#send">send</a></li></ul></li><li><a href="Invite.html">Invite</a></li><li><a href="Message.html">Message</a></li><li><a href="Presence.html">Presence</a></li><li><a href="Role.html">Role</a><ul class='methods'><li data-type='method'><a href="Role.html#changeName">changeName</a></li><li data-type='method'><a href="Role.html#changePosition">changePosition</a></li><li data-type='method'><a href="Role.html#delete">delete</a></li><li data-type='method'><a href="Role.html#modify">modify</a></li></ul></li><li><a href="Structure.html">Structure</a></li><li><a href="TextBasedChannel.html">TextBasedChannel</a><ul class='methods'><li data-type='method'><a href="TextBasedChannel.html#send">send</a></li></ul></li><li><a href="User.html">User</a><ul class='methods'><li data-type='method'><a href="User.html#toString">toString</a></li></ul></li><li><a href="VoiceChannel.html">VoiceChannel</a></li></ul><h3>Events</h3><ul><li><a href="Client.html#event:Channel_Create">Channel_Create</a></li><li><a href="Client.html#event:Channel_Delete">Channel_Delete</a></li><li><a href="Client.html#event:Channel_Update">Channel_Update</a></li><li><a href="Client.html#event:Guild_Create">Guild_Create</a></li><li><a href="Client.html#event:Guild_newMember">Guild_newMember</a></li><li><a href="Client.html#event:Guild_Role_Create">Guild_Role_Create</a></li><li><a href="Client.html#event:Guild_Role_Delete">Guild_Role_Delete</a></li><li><a href="Client.html#event:Guild_Role_Update">Guild_Role_Update</a></li><li><a href="Client.html#event:Guild_Update">Guild_Update</a></li><li><a href="Client.html#event:Message_Create">Message_Create</a></li><li><a href="Client.html#event:Message_Update">Message_Update</a></li><li><a href="Client.html#event:ready">ready</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Client.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const EventEmitter = require('events').EventEmitter
const WebSocketManager = require ('./WebSocket/WebSocketManager')
const Box = require('./Models/Box.js');
const APIManager = require('./API/APIManager.js')

/**
* @param {Object} options Default client options
* @param {String} [options.presence] The default presence
* @param {String} [options.presence.game] The name of the game
* @param {String} [options.presence.url] The URL - Set the client to "Stream"
* @param {String} [options.presence.status] Client's status - 'online', 'dnd' ...
* @property {Object} user The client's user object
* @property {Object} options The client's options
* @property {Box} users A box which includes all the users object the client can get
* @property {Box} channels A box which includes all of the channels the client can access
* @property {Box} guilds A box which includes all of the guilds the client is in
* @property {Box} presences A box which includes all of the presences of the users the client can get
* @property {Box} emojis A box which includes all of the emojis from the guilds the client is in
* @property {Date} uptime Returns the uptime of the client (Unix format)
* @property {String} invite_link Returns Client's invite link (@everyone permissions)
* @property {Number} status Returns Client's connection status to the websocket
*/
class Client extends EventEmitter {
  constructor(options = {}) {
    super();
    this.ws = new WebSocketManager(this);
    this.APIManager = new APIManager(this)

    this.users = new Box;
    this.channels = new Box;
    this.guilds = new Box;
    this.presences = new Box;
    this.emojis = new Box;
    this.options = options
    this.readyUnix = null;
  }

  connect(token) {
    const that = this
    that.token = token
    return new Promise(function(resolve, reject) {
      that.ws.on('WSclose', (e) => {
        that.emit('close', e)
      });

      that.ws.on('ready', () => {
        if (!this.readyUnix) {
          reject(e);
        }

        that.emit('ready')
      });

      that.ws.on('WSerror', (e) => {
        if (that.readyUnix) {
          reject(e);
        }

        that.emit('error', e);
      });

      that.ws.start(resolve, reject);
    });
  }

  get uptime() {
    return Date.now() - this.readyUnix
  }

  get invite_link() {
    return `https://discordapp.com/oauth2/authorize/?permissions=0&amp;scope=bot&amp;client_id=${this.id}`
  }

  get status() {
    return this.ws.connection.status;
  }

  getOption(name, defaultOpt = null) {
    if (this.options instanceof Object &amp;&amp; this.options[name]) {
      return this.options[name]
    }
    return defaultOpt;
  }

}

module.exports = Client;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Nov 25 2017 12:30:45 GMT+0200 (Jerusalem Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
